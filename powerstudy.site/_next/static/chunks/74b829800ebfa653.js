(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,75254,e=>{"use strict";var t=e.i(71645);let r=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim();var s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let a=(0,t.forwardRef)(({color:e="currentColor",size:a=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:n="",children:o,iconNode:c,...d},u)=>(0,t.createElement)("svg",{ref:u,...s,width:a,height:a,stroke:e,strokeWidth:i?24*Number(l)/Number(a):l,className:r("lucide",n),...d},[...c.map(([e,r])=>(0,t.createElement)(e,r)),...Array.isArray(o)?o:[o]])),l=(e,s)=>{let l=(0,t.forwardRef)(({className:l,...i},n)=>(0,t.createElement)(a,{ref:n,iconNode:s,className:r(`lucide-${e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,l),...i}));return l.displayName=`${e}`,l};e.s(["default",()=>l],75254)},56624,e=>{"use strict";var t=e.i(71645),r=e.i(11209);function s(...e){let{serverInfo:a}=(0,r.useServerInfo)(),l="PowerStudy";(0,t.useEffect)(()=>{let t=e.filter(Boolean).join(" - "),r=a?.webName??l;document.title=t?`${t} | ${r}`:r},[e,a?.webName,l])}e.s(["usePageTitle",()=>s])},82458,e=>{"use strict";let t=(0,e.i(75254).default)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);e.s(["default",()=>t])},74952,e=>{"use strict";var t=e.i(43476),r=e.i(46932);let s=[{size:100,top:"10%",left:"10%",color:"bg-purple-500",duration:8},{size:140,top:"30%",left:"50%",color:"bg-blue-500",duration:12},{size:80,top:"70%",left:"75%",color:"bg-pink-500",duration:10},{size:60,top:"20%",left:"80%",color:"bg-purple-400",duration:6},{size:90,top:"60%",left:"15%",color:"bg-indigo-500",duration:9},{size:70,top:"80%",left:"40%",color:"bg-pink-600",duration:11},{size:50,top:"35%",left:"25%",color:"bg-blue-400",duration:7},{size:100,top:"15%",left:"60%",color:"bg-fuchsia-500",duration:10}];e.s(["QuantumParticles",0,()=>(0,t.jsx)(t.Fragment,{children:s.map((e,s)=>(0,t.jsx)(r.motion.div,{className:`absolute rounded-full ${e.color} opacity-40 blur-xl shadow-[0_0_40px_${e.color.replace("bg-","rgba(").replace("-500",",0.4)")}]`,style:{width:`${e.size}px`,height:`${e.size}px`,top:e.top,left:e.left,zIndex:0,filter:"drop-shadow(0 0 20px rgba(255,255,255,0.2))"},animate:{y:[0,-25,0],x:[0,15,0]},transition:{duration:e.duration,repeat:1/0,ease:"easeInOut",delay:2*Math.random()}},s))})])},59199,e=>{"use strict";e.i(47167);var t=e.i(43476),r=e.i(71645),s=e.i(18566),a=e.i(74952),l=e.i(82458),l=l,i=e.i(46696),n=e.i(11209),o=e.i(56624);function c(){let[e,c]=(0,r.useState)("phone"),[d,u]=(0,r.useState)(""),[p,h]=(0,r.useState)(!1),[m,f]=(0,r.useState)(15),[x,g]=(0,r.useState)(!1),[b,y]=(0,r.useState)(!1),v=(0,s.useRouter)(),j=(0,n.useServerInfo)();(0,o.usePageTitle)("Login");let[w,N]=(0,r.useState)(""),[T,P]=(0,r.useState)(""),[S,O]=(0,r.useState)(null),[k,A]=(0,r.useState)(!1),[z,C]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/server/captcha"),t=await e.json();A(t.captcha||!1)}catch(e){console.error("Error fetching captcha setting:",e),A(!1)}})()},[]),(0,r.useEffect)(()=>{if(k){let e=document.createElement("script");e.src="https://challenges.cloudflare.com/turnstile/v0/api.js",e.async=!0,document.body.appendChild(e)}},[k]);let[I,E]=(0,r.useState)("");(0,r.useEffect)(()=>{window.onTurnstileSuccess=e=>{E(e)}},[]),(0,r.useEffect)(()=>{let t;return"otp"===e?(f(15),g(!1),t=setInterval(()=>{f(e=>e<=1?(clearInterval(t),g(!0),0):e-1)},1e3)):(f(15),g(!1)),()=>clearInterval(t)},[e]);let $=async e=>{h(!0),P("");try{let t=await fetch(`/api/auth/resend-otp?smsType=${e}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phoneNumber:w})}),r=await t.json();if(!t.ok||!r.success){P(r.message||"Failed to resend OTP"),i.toast.error(r.message||"Failed to resend OTP");return}r?.success&&i.toast.success(r.message||"OTP Resend Success!")}catch(e){console.error(e),P("An error occurred while resending OTP."),i.toast.error("An error occurred while resending OTP.")}finally{h(!1)}},_=async e=>{if(e.preventDefault(),!w||!/^[6-9][0-9]{9}$/.test(w)){P("Please enter a valid 10-digit mobile number."),i.toast.error("Please enter a valid 10-digit mobile number.");return}if(k&&!I){P("Please complete the captcha verification."),i.toast.error("Please complete the captcha verification.");return}if(!k&&!z){P("Please check the 'I'm not a robot' checkbox."),i.toast.error("Please check the 'I'm not a robot' checkbox.");return}P(""),h(!0);try{let e=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phoneNumber:w,captchaToken:k?I:void 0,simpleCaptcha:k?void 0:z})}),t=await e.json();if(!e.ok||!t.success){P(t.message||"OTP request failed"),i.toast.error(t.message||"OTP request failed");return}t.success&&i.toast.success(t.message||"Otp Sent!"),c("otp")}catch(e){console.error(e),P("An error occurred while sending OTP."),i.toast.error("An error occurred while sending OTP.")}finally{h(!1)}},R=async e=>{if(e.preventDefault(),!d||d.length<=3){P("Please enter the OTP."),i.toast.error("Please enter the OTP.");return}P(""),h(!0);try{let e=await fetch("/api/auth/verify-otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({phoneNumber:w,otp:d}),credentials:"include"}),t=await e.json();if(!e.ok||!t.success){P(t.message||"OTP verification failed"),i.toast.error(t.message||"OTP verification failed");return}t.success&&i.toast.success(t.message||"Otp Verified!"),t.success&&t.user&&(localStorage.setItem("USER_DATA",JSON.stringify({_id:t.user.id,UserName:t.user.name,telegramId:t.user.telegramId||void 0,photoUrl:t.user.photoUrl||null,anon_id:t.user.anon_id||null})),localStorage.setItem("ACCESS_TOKEN",t.accessToken)),y(!0),setTimeout(()=>{v.replace("/study")},800)}catch(e){P("An error occurred during OTP verification."),i.toast.error("An error occurred during OTP verification."),console.error(e)}finally{h(!1)}},M=j?.serverInfo?.isDirectLoginOpen,B=j?.serverInfo?.tg_username;return(0,t.jsxs)("div",{className:"relative min-h-screen flex items-center justify-center bg-gradient-to-br from-[#0f0f23] via-[#1a1a2e] to-[#0f0f23] px-4 overflow-hidden",children:[(0,t.jsx)(a.QuantumParticles,{}),(0,t.jsxs)("form",{onSubmit:"phone"===e?_:R,className:"w-full max-w-sm bg-[#1f1f2e] text-white rounded-2xl shadow-[0_0_30px_rgba(255,255,255,0.05)] p-6 md:p-8 space-y-6 z-10 border border-white/10 backdrop-blur-sm",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"phone"===e?"Sign In":"Verify OTP"}),(0,t.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"phone"===e?"Enter your mobile number to continue":`OTP sent to +91-${w}`})]}),(0,t.jsxs)("div",{className:"space-y-4",children:["phone"===e?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex items-center bg-[#2a2a3a] border border-gray-700 rounded-lg overflow-hidden focus-within:ring-2 focus-within:ring-purple-500 transition",children:[(0,t.jsx)("span",{className:"px-4 py-3 text-gray-400 font-medium",children:"+91"}),(0,t.jsx)("input",{type:"number",maxLength:10,value:w,onChange:e=>{let t=e.target.value.replace(/\D/g,"");N(t),S&&clearTimeout(S),O(setTimeout(()=>{10!==t.length?P("Mobile number must be 10 digits"):/^[6-9]/.test(t)?P(""):P("Mobile number must start with 6, 7, 8, or 9")},400))},className:"flex-1 px-4 py-3 bg-transparent text-white placeholder-gray-500 outline-none",placeholder:"Mobile Number"})]}),k?(0,t.jsx)("div",{className:"my-4 text-center align-middle",children:(0,t.jsx)("div",{className:"cf-turnstile turnstile-full","data-sitekey":"0x4AAAAAABslFYkHSTcnfaeU","data-callback":"onTurnstileSuccess"})}):(0,t.jsxs)("label",{className:"flex items-center text-sm text-gray-400 space-x-2",children:[(0,t.jsx)("input",{type:"checkbox",checked:z,onChange:e=>C(e.target.checked),className:"w-4 h-4 text-purple-500 bg-black border-gray-600 rounded accent-purple-600"}),(0,t.jsx)("span",{children:"I'm not a robot"})]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"flex items-center bg-[#2a2a3a] border border-gray-700 rounded-lg overflow-hidden focus-within:ring-2 focus-within:ring-purple-500 transition",children:(0,t.jsx)("input",{type:"number",maxLength:6,value:d,onChange:e=>{let t=e.target.value.replace(/\D/g,"");u(t),S&&clearTimeout(S),O(setTimeout(()=>{t.length<=3?P("OTP must be more than 3 digits"):P("")},400))},className:"flex-1 px-4 py-3 bg-transparent text-white placeholder-gray-500 outline-none text-center",placeholder:"Enter OTP",autoFocus:!0})}),x?(0,t.jsxs)("div",{className:"flex flex-wrap items-center space-y-2 text-sm text-gray-400",children:[(0,t.jsx)("p",{className:"text-gray-400",children:"Didn't get the OTP?"}),(0,t.jsxs)("div",{className:"flex flex-col text-center gap-2 item-center w-full justify-center",children:[(0,t.jsx)("button",{type:"button",onClick:()=>$(0),className:"text-purple-400 px-3 py-1",children:"Resend via SMS"}),(0,t.jsx)("button",{type:"button",onClick:()=>$(1),className:"text-green-400 px-3 py-1 ",children:"Send on WhatsApp"})]})]}):(0,t.jsxs)("p",{className:"text-xs text-gray-500 text-center",children:["You can resend OTP in ",m,"s"]})]}),T&&(0,t.jsx)("p",{className:"text-sm text-red-400 -mt-2",children:T}),(0,t.jsx)("button",{disabled:p||b||("phone"===e?(k?!I:!z)||10!==w.length:d.length<=3),type:"submit",className:"w-full bg-purple-600 hover:bg-purple-700 transition text-white font-semibold py-3 rounded-lg disabled:opacity-50 disabled:cursor-not-allowed",children:p?"Please wait...":b?"Verified":"phone"===e?"Send OTP":"Verify OTP"})]}),(0,t.jsxs)("p",{className:"text-xs text-center text-gray-500",children:["Made with ❤️ by"," ",(0,t.jsx)("span",{className:"font-semibold text-purple-400",children:"PW Quantum"})]}),!M&&(0,t.jsx)("div",{className:"bg-gradient-to-r from-blue-900/30 to-purple-900/30 border border-blue-500/40 rounded-lg p-4 mb-4",children:(0,t.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,t.jsx)("div",{className:"flex-shrink-0",children:(0,t.jsx)("svg",{className:"w-5 h-5 text-blue-400 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("h3",{className:"text-sm font-semibold text-blue-300 mb-2 inline-flex",children:[(0,t.jsx)(l.default,{size:17,className:"mr-2",color:"#bfbd4e"})," ","Authorization Required"]}),(0,t.jsx)("p",{className:"text-xs text-blue-200 leading-relaxed mb-3",children:"Before logging in, you need to authorize yourself with our bot first."}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("span",{className:"text-xs text-blue-300",children:"Bot Username:"}),(0,t.jsx)("a",{href:`https://telegram.me/${B?.replace("@","")}`,target:"_blank",rel:"noopener noreferrer",className:"font-mono text-blue-100 bg-blue-900/50 px-2 py-1 rounded text-xs hover:bg-blue-800/70 transition-colors",children:B})]})]})]})})]})]})}e.s(["default",()=>c],59199)}]);